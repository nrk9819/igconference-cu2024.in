---
import {countriesList} from "../../scripts/countries-list"

const {id, heading, form_type, page="technical-session", form_id, ...props} = Astro.props
---

<div {...props} id={id} class=`mb-8 md:mb-10 flex flex-col rounded-lg overflow-hidden border border-slate-200 ${form_type=="secondary" && "hidden"}`>
    <div class="px-8 md:px-12 py-6 bg-slate-50 border-b border-slate-200">
        <h2 class="text-xl font-medium">{heading}</h2>
    </div>
    <div class="px-8 md:px-12 py-8 bg-white">
        <form id={form_id} name={heading} enctype="multipart/form-data" class="text-md md:text-lg">
           <!-- Title (Mr./Ms./Dr./Other) -->
            <div class="mb-6">
                <label for="title" class="block mb-2">Title (Dr./ Mr./ Ms./ Other)</label>
                <input type="text" id="title" name="title" autocomplete="honorific-prefix" required class="w-full py-3 px-4 border rounded border-slate-300 bg-slate-50 focus:bg-white">
            </div>
    
            <!-- First Name -->
            <div class="mb-6">
                <label for="first_name" class="block mb-2">First Name</label>
                <input type="text" id="first_name" name="first_name" required class="w-full py-3 px-4 border rounded border-slate-300 bg-slate-50 focus:bg-white">
            </div>
    
            <!-- Last Name -->
            <div class="mb-6">
                <label for="last_name" class="block mb-2">Last Name</label>
                <input type="text" id="last_name" name="last_name" required class="w-full py-3 px-4 border rounded border-slate-300 bg-slate-50 focus:bg-white">
            </div>
    
            <!-- Position/Designation -->
            <div class="mb-6">
                <label for="position" class="block mb-2">Position</label>
                <input type="text" id="position" name="position" autocomplete="organization-title" required class="w-full py-3 px-4 border rounded border-slate-300 bg-slate-50 focus:bg-white">
            </div>
    
            <!-- University/Organization -->
            <div class="mb-6">
                <label for="organization" class="block mb-2">University/Organization</label>
                <input type="text" id="organization" name="organization" autocomplete="organization" required class="w-full py-3 px-4 border rounded border-slate-300 bg-slate-50 focus:bg-white">
            </div>
    
            <!-- Country Select -->
            <div class="mb-6">
                <label for="country" class="block mb-2">Country</label>
                <select id="country" name="country" class="w-full py-3 px-4 border rounded border-slate-300 bg-slate-50 focus:bg-white">
                {
                    Object.keys(countriesList).map(country => (
                        <option selected={country==="India"&&"selected"} value={country}>{country}</option>
                    ))
                }
                </select>
            </div>
            
            <!-- Email -->
            <div class="mb-6">
                <label for="email" class="block mb-2">Email</label>
                <input type="email" id="email" name="email" autocomplete="email" required class="w-full py-3 px-4 border rounded border-slate-300 bg-slate-50 focus:bg-white">
            </div>
    
            <!-- Phone No -->
            <div class="mb-6">
                <label for="phone" class="block mb-2">Phone Number</label>
                <div class="flex">
                    <!-- dial code -->
                    <input type="text" id="phone_code" name="phone_code" value="+91" required readonly class="w-24 py-3 px-4 border rounded-l border-slate-300 bg-slate-50 focus:bg-white">
                    <!-- phone number -->
                    <input type="tel" id="phone_number" name="phone_number" autocomplete="tel-national" required class="w-full py-3 px-4 border rounded-r border-slate-300 bg-slate-50 focus:bg-white">
                 </div>
            </div>
    
           {
                page!== "technical-session" && (
                <!-- Certificate from Institution for their Status (Image Upload) -->
                <div class="mb-8">
                <label for="certificate" class="block mb-4">Certificate from Institution for their status (JPEG or PNG only)</label>
                <input type="file" id="certificate" name="certificate" accept=".jpeg, .jpg, .png" required>
            </div>
            <!-- Age Proof (Image Upload) -->
            <div class="mb-6">
                <label for="age_proof" class="block mb-4">Age Proof (AADHAR/PAN in JPEG or PNG only)</label>
                <input type="file" id="age_proof" name="age_proof" accept=".jpeg, .jpg, .png" required>
            </div>
                )
            }
            
    
           
        </form>
    </div>
</div>

<script>
    import {countriesList} from "../../scripts/countries-list"

    const countrySelector = document.getElementById("country")
    const phoneCodeField = document.getElementById("phone_code")
    

    countrySelector.addEventListener("change", ()=> {
        const selectedCountry = countrySelector.value 
        phoneCodeField.value = `+${countriesList[selectedCountry]}`
    })
</script>